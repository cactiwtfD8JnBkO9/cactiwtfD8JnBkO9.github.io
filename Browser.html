<head>
  <title>Cacti</title>
</head>

<body>
  <script>
    (function () {

function convertURL(inputURL) {
  // Replace '.' with '-' and add the translation domain
 var convertedURL = inputURL.replace(/\.+/g, "-") + ".translate.goog/";

  return `${convertedURL}`;
} 

   function getUrlParameter(name) {
            name = name.replace(/[\[\]]/g, '\\$&');
            var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)');
            var results = regex.exec(window.location.href);
            if (!results) return null;
            if (!results[2]) return '';
            return decodeURIComponent(results[2].replace(/\+/g, ' '));
        }







// Example usage:
var originalURL = getUrlParameter('proxy')
var convertedURL = convertURL(originalURL);
var FixedURL = convertedURL + "?_x_tr_sl=auto&_x_tr_tl=en&_x_tr_hl=en-US&_x_tr_pto=wapp"
if (originalURL === 'https://google.co.uk' || originalURL === 'https://google.com' || originalURL === 'http://google.com' || originalURL === 'https://google.co.uk') {
  window.location.href = './Proxy.html';
}

      // Define your API URL
      var apiUrl = "https://api.allorigins.win/raw?url=" + encodeURIComponent(FixedURL)
console.log(apiUrl)

      // Make an HTTP GET request using the Fetch API
      fetch(apiUrl)
        .then(function (response) {
          return response.text(); // Get the response data as text
        })
        .then(function (responseData) {
          // Replace the current window's content with the API response
var regexString = convertedURL;
var regex = new RegExp(regexString, "g");
var other = new RegExp("proxy", "g");


responseData = responseData.replace(regex, window.location.href.replace(other, "proxy") + "&#");

console.log(responseData)

          document.open();
          document.write(responseData);
          document.close();

        })
        .catch(function (error) {
          console.error("Error fetching data:", error);
        });


// Wait for 5 seconds (5000 milliseconds)




    })();
  </script>
</body>

</html>